<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Lecture">

	<resultMap type="Lecture" id="LectureResultMap">
		<result column="num" property="num"/>
		<result column="lect_num" property="lect_num"/>
		<result column="subj_num" property="subj_num"/>
		<result column="lect_name" property="lect_name"/>
		<result column="subj_name" property="subj_name"/>
		<result column="teacher_id" property="teacher_id"/>
		<result column="teacher_name" property="teacher_name"/>
		<result column="book_num" property="book_num"/>
		<result column="book_name" property="book_name"/>
		<result column="day" property="day"/>
		<result column="beginTime" property="beginTime"/>
		<result column="endTime" property="endTime"/>
		<result column="price" property="price"/>
		
	</resultMap>

	<select id="getLecture" resultMap="LectureResultMap" parameterType="java.lang.Integer">
		<![CDATA[
			SELECT L.LECT_NUM, S.SUBJ_NAME, L.LECT_NAME, T.NAME TEACHER_NAME, B.BOOK_NAME, L.DAY, L.BEGINTIME, L.ENDTIME, L.PRICE
			FROM LECTURE L, SUBJECT S, BOOK B, TEACHER T
			WHERE L.SUBJ_NUM = S.SUBJ_NUM
			AND L.BOOK_NUM = B.BOOK_NUM
			AND L.TEACHER_ID = T.ID
			AND L.LECT_NUM = #{lect_num}
		]]>
	</select>
	<select id="getAllLectureList" resultType="Lecture">
		<![CDATA[
			SELECT ROWNUM NUM, L.LECT_NUM, S.SUBJ_NAME, L.LECT_NAME, T.NAME TEACHER_NAME, B.BOOK_NAME, L.DAY, L.BEGINTIME, L.ENDTIME, L.PRICE
			FROM LECTURE L, SUBJECT S, BOOK B, TEACHER T
			WHERE L.SUBJ_NUM = S.SUBJ_NUM
			AND L.BOOK_NUM = B.BOOK_NUM
			AND L.TEACHER_ID = T.ID
		]]>
	</select>
	<select id="getLectureList" resultType="Lecture">
		<![CDATA[
			SELECT L.LECT_NUM, S.SUBJ_NAME, L.LECT_NAME, T.NAME TEACHER_NAME, B.BOOK_NAME, L.DAY, L.BEGINTIME, L.ENDTIME, L.PRICE
			FROM LECTURE L, SUBJECT S, BOOK B
			WHERE L.SUBJ_NUM = S.SUBJ_NUM 
			AND L.BOOK_NUM = B.BOOK_NUM
			AND L.TEACHER_ID = T.ID
			AND L.SUBJ_NUM = #{subj_num}
		]]>
	</select>
	<insert id="addLecture"  parameterType="Lecture">
		<![CDATA[
			INSERT INTO LECTURE
			(LECT_NUM, SUBJ_NUM, LECT_NAME, TEACHER_ID, BOOK_NUM, DAY, BEGINTIME, ENDTIME, PRICE)
			VALUES
			(LECTURE_SEQ.NEXTVAL, #{subj_num}, #{lect_name}, #{teacher_id}, #{book_num}, #{day}, #{beginTime}, #{endTime}, #{price})
			
		]]>
	</insert>
	<delete id="deleteLecture"  parameterType="java.lang.Integer">
		<![CDATA[
			DELETE LECTURE WHERE LECT_NUM = #{lect_num}			
		]]>
	</delete>
	<update id="updateLecture" parameterType="Lecture">
		<![CDATA[
			UPDATE LECTURE SET SUBJ_NUM = #{subj_num}, LECT_NAME = #{lect_name}, TEACHER_ID = #{teacher_id},
			BOOK_NUM = #{book_num}, DAY = #{day}, BEGINTIME = #{begintime}, ENDTIME = #{endtime}, PRICE = #{price}
			WHERE LECT_NUM = #{lect_num}			
		]]>
	</update>
	

</mapper>
